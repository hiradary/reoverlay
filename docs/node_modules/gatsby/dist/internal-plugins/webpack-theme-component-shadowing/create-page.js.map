{"version":3,"sources":["../../../src/internal-plugins/webpack-theme-component-shadowing/create-page.js"],"names":["path","require","GatsbyThemeComponentShadowingResolverPlugin","store","module","exports","pageComponent","shadowingPlugin","extensions","getState","program","themes","flattenedPlugins","map","aPlugin","themeDir","pluginFilepath","themeName","name","projectRoot","directory","matchingThemes","getMatchingThemesForPath","length","Error","theme","join","component","split","componentPath","resolveComponentPath","matchingTheme"],"mappings":";;AAAA,MAAMA,IAAI,GAAGC,OAAO,CAAE,MAAF,CAApB;;AAEA,MAAMC,2CAA2C,GAAGD,OAAO,CAAE,GAAF,CAA3D;;AACA,MAAM;AAAEE,EAAAA;AAAF,IAAYF,OAAO,CAAE,aAAF,CAAzB;;AAEAG,MAAM,CAACC,OAAP,GAAiB,UAAUC,aAAV,EAAyB;AACxC,QAAMC,eAAe,GAAG,IAAIL,2CAAJ,CAAgD;AACtEM,IAAAA,UAAU,EAAEL,KAAK,CAACM,QAAN,GAAiBC,OAAjB,CAAyBF,UADiC;AAEtEG,IAAAA,MAAM,EAAER,KAAK,CAACM,QAAN,GAAiBG,gBAAjB,CAAkCC,GAAlC,CAAsCC,OAAO,IAAI;AACvD,aAAO;AACLC,QAAAA,QAAQ,EAAED,OAAO,CAACE,cADb;AAELC,QAAAA,SAAS,EAAEH,OAAO,CAACI;AAFd,OAAP;AAID,KALO,CAF8D;AAQtEC,IAAAA,WAAW,EAAEhB,KAAK,CAACM,QAAN,GAAiBC,OAAjB,CAAyBU;AARgC,GAAhD,CAAxB;AAUA,QAAMC,cAAc,GAAGd,eAAe,CAACe,wBAAhB,CAAyChB,aAAzC,CAAvB;;AACA,MAAIe,cAAc,CAACE,MAAf,GAAwB,CAA5B,EAA+B;AAC7B,UAAM,IAAIC,KAAJ,CACH,6CAA4CH,cAAc,CACxDR,GAD0C,CACtCY,KAAK,IAAIA,KAAK,CAACR,SADuB,EAE1CS,IAF0C,CAEpC,OAFoC,CAE5B,aAAYpB,aAAc,EAHvC,CAAN;AAKD;;AAED,MAAIe,cAAc,CAACE,MAAf,IAAyB,CAA7B,EAAgC;AAC9B,UAAM,CAACE,KAAD,IAAUJ,cAAhB;AACA,UAAM,GAAGM,SAAH,IAAgBrB,aAAa,CAACsB,KAAd,CAAoB5B,IAAI,CAAC0B,IAAL,CAAUD,KAAK,CAACV,QAAhB,EAA2B,KAA3B,CAApB,CAAtB;AACA,UAAMc,aAAa,GAAGtB,eAAe,CAACuB,oBAAhB,CAAqC;AACzDC,MAAAA,aAAa,EAAEN,KAAK,CAACR,SADoC;AAEzDN,MAAAA,MAAM,EAAEJ,eAAe,CAACI,MAFiC;AAGzDgB,MAAAA;AAHyD,KAArC,CAAtB;;AAKA,QAAIE,aAAJ,EAAmB;AACjB,aAAOA,aAAP;AACD;AACF;;AACD,SAAO,KAAP;AACD,CAjCD","sourcesContent":["const path = require(`path`)\n\nconst GatsbyThemeComponentShadowingResolverPlugin = require(`.`)\nconst { store } = require(`../../redux`)\n\nmodule.exports = function (pageComponent) {\n  const shadowingPlugin = new GatsbyThemeComponentShadowingResolverPlugin({\n    extensions: store.getState().program.extensions,\n    themes: store.getState().flattenedPlugins.map(aPlugin => {\n      return {\n        themeDir: aPlugin.pluginFilepath,\n        themeName: aPlugin.name,\n      }\n    }),\n    projectRoot: store.getState().program.directory,\n  })\n  const matchingThemes = shadowingPlugin.getMatchingThemesForPath(pageComponent)\n  if (matchingThemes.length > 1) {\n    throw new Error(\n      `Gatsby can't differentiate between themes ${matchingThemes\n        .map(theme => theme.themeName)\n        .join(` and `)} for path ${pageComponent}`\n    )\n  }\n\n  if (matchingThemes.length == 1) {\n    const [theme] = matchingThemes\n    const [, component] = pageComponent.split(path.join(theme.themeDir, `src`))\n    const componentPath = shadowingPlugin.resolveComponentPath({\n      matchingTheme: theme.themeName,\n      themes: shadowingPlugin.themes,\n      component,\n    })\n    if (componentPath) {\n      return componentPath\n    }\n  }\n  return false\n}\n"],"file":"create-page.js"}