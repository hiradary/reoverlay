{"version":3,"sources":["../../src/utils/detect-port-in-use-and-prompt.ts"],"names":["detectPortInUseAndPrompt","port","foundPort","detectedPort","catch","err","report","panic","log","response","type","name","message","initial","newPort","Error"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;AAEO,MAAMA,wBAAwB,GAAG,MACtCC,IADsC,IAElB;AACpB,MAAIC,SAAS,GAAGD,IAAhB;AACA,QAAME,YAAY,GAAG,MAAM,yBAAWF,IAAX,EAAiBG,KAAjB,CAAwBC,GAAD,IAChDC,kBAAOC,KAAP,CAAaF,GAAb,CADyB,CAA3B;;AAGA,MAAIJ,IAAI,KAAKE,YAAb,EAA2B;AACzBG,sBAAOE,GAAP,CAAY,0CAAyCP,IAAK,EAA1D;;AACA,UAAMQ,QAAQ,GAAG,MAAM,sBAAQ;AAC7BC,MAAAA,IAAI,EAAG,SADsB;AAE7BC,MAAAA,IAAI,EAAG,SAFsB;AAG7BC,MAAAA,OAAO,EAAG,wDAHmB;AAI7BC,MAAAA,OAAO,EAAE;AAJoB,KAAR,CAAvB;;AAMA,QAAIJ,QAAQ,CAACK,OAAb,EAAsB;AACpBZ,MAAAA,SAAS,GAAGC,YAAZ;AACD,KAFD,MAEO;AACL,YAAM,IAAIY,KAAJ,CAAW,eAAX,CAAN;AACD;AACF;;AAED,SAAOb,SAAP;AACD,CAvBM","sourcesContent":["import detectPort from \"detect-port\"\nimport report from \"gatsby-cli/lib/reporter\"\nimport prompts from \"prompts\"\n\nexport const detectPortInUseAndPrompt = async (\n  port: number\n): Promise<number> => {\n  let foundPort = port\n  const detectedPort = await detectPort(port).catch((err: Error) =>\n    report.panic(err)\n  )\n  if (port !== detectedPort) {\n    report.log(`\\nSomething is already running at port ${port}`)\n    const response = await prompts({\n      type: `confirm`,\n      name: `newPort`,\n      message: `Would you like to run the app at another port instead?`,\n      initial: true,\n    })\n    if (response.newPort) {\n      foundPort = detectedPort\n    } else {\n      throw new Error(`USER_REJECTED`)\n    }\n  }\n\n  return foundPort\n}\n"],"file":"detect-port-in-use-and-prompt.js"}