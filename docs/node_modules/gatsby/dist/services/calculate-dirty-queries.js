"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

exports.__esModule = true;
exports.calculateDirtyQueries = calculateDirtyQueries;

var _query = require("../query");

var _reporter = _interopRequireDefault(require("gatsby-cli/lib/reporter"));

async function calculateDirtyQueries({
  store
}) {
  if (!store) {
    _reporter.default.panic(`Cannot run service without a redux store`);
  }

  const state = store.getState(); // TODO: Check filesDirty from context

  const queryIds = (0, _query.calcInitialDirtyQueryIds)(state);
  return {
    queryIds: (0, _query.groupQueryIds)(queryIds)
  };
}
//# sourceMappingURL=calculate-dirty-queries.js.map