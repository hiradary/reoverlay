{"version":3,"sources":["../../src/services/run-static-queries.ts"],"names":["runStaticQueries","parentSpan","queryIds","store","program","graphqlRunner","reporter","panic","staticQueryIds","length","state","getState","activity","createProgress","id","start","graphqlTracing","done"],"mappings":";;;;;;;AAAA;;AAEA;;AAEO,eAAeA,gBAAf,CAAgC;AACrCC,EAAAA,UADqC;AAErCC,EAAAA,QAFqC;AAGrCC,EAAAA,KAHqC;AAIrCC,EAAAA,OAJqC;AAKrCC,EAAAA;AALqC,CAAhC,EAMmC;AACxC,MAAI,CAACF,KAAL,EAAY;AACVG,sBAASC,KAAT,CAAgB,0CAAhB;AACD;;AACD,MAAI,CAACL,QAAL,EAAe;AACb;AACD;;AACD,QAAM;AAAEM,IAAAA;AAAF,MAAqBN,QAA3B;;AACA,MAAI,CAACM,cAAc,CAACC,MAApB,EAA4B;AAC1B;AACD;;AAED,QAAMC,KAAK,GAAGP,KAAK,CAACQ,QAAN,EAAd;;AACA,QAAMC,QAAQ,GAAGN,kBAASO,cAAT,CACd,oBADc,EAEfL,cAAc,CAACC,MAFA,EAGf,CAHe,EAIf;AACEK,IAAAA,EAAE,EAAG,sBADP;AAEEb,IAAAA;AAFF,GAJe,CAAjB;;AAUAW,EAAAA,QAAQ,CAACG,KAAT;AACA,QAAM,iCAAqBP,cAArB,EAAqC;AACzCE,IAAAA,KADyC;AAEzCE,IAAAA,QAFyC;AAGzCP,IAAAA,aAHyC;AAIzCW,IAAAA,cAAc,EAAEZ,OAAF,aAAEA,OAAF,uBAAEA,OAAO,CAAEY;AAJgB,GAArC,CAAN;AAOAJ,EAAAA,QAAQ,CAACK,IAAT;AACD","sourcesContent":["import { processStaticQueries } from \"../query\"\nimport { IBuildContext } from \"./\"\nimport reporter from \"gatsby-cli/lib/reporter\"\n\nexport async function runStaticQueries({\n  parentSpan,\n  queryIds,\n  store,\n  program,\n  graphqlRunner,\n}: Partial<IBuildContext>): Promise<void> {\n  if (!store) {\n    reporter.panic(`Cannot run service without a redux store`)\n  }\n  if (!queryIds) {\n    return\n  }\n  const { staticQueryIds } = queryIds\n  if (!staticQueryIds.length) {\n    return\n  }\n\n  const state = store.getState()\n  const activity = reporter.createProgress(\n    `run static queries`,\n    staticQueryIds.length,\n    0,\n    {\n      id: `static-query-running`,\n      parentSpan,\n    }\n  )\n\n  activity.start()\n  await processStaticQueries(staticQueryIds, {\n    state,\n    activity,\n    graphqlRunner,\n    graphqlTracing: program?.graphqlTracing,\n  })\n\n  activity.done()\n}\n"],"file":"run-static-queries.js"}